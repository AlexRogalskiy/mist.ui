<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="mist-resizer">
<template></template>
<script>
    Polymer({
        is: 'mist-resizer',
        properties: {},
        observers: [],
        listeners: {},
        attached: function(){
            var throttle = function(type, name, obj) {
                obj = obj || window;
                var running = false;
                var func = function() {
                    if (running) { return; }
                    running = true;
                     requestAnimationFrame(function() {
                        obj.dispatchEvent(new CustomEvent(name));
                        running = false;
                    });
                };
                obj.addEventListener(type, func);
            };

            /* init - you can init any event */
            throttle("resize", "optimizedResize");

            var element = this.parentNode;
            window.addEventListener("optimizedResize", function() {
                element.fire('resize')
            });
        },
        detached: function(){
            window.removeEventListener('resize', this, false);
        }
    });
</script>
</dom-module>