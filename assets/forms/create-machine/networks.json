{
  "type": "object",
  "id": "networks",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "networkSubform": {
      "id": "network_subform",
      "type": "object",
      "format": "subform",
      "properties": {
        "security_group": {
          "type": "string",
          "format": "dropdown",
          "label": "Security group",
          "helpText": "Specify the security group for this machine"
          "deps": [
            {
              "prop": "hidden",
              "func": "hideSecurityGroup",
              "dependsOn": "cloudContainer.cloud"
            },
            {
              "prop": "enum",
              "func": "getSecurityGroups",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "azureNetwork": {
          "type": "string",
          "name": "network",
          "label": "Network",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotAzure",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "network": {
          "type": "string",
          "name": "network",
          "format": "dropdown",
          "label": "Network",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideNetwork",
              "dependsOn": "cloudContainer.cloud"
            },
            {
              "prop": "enum",
              "func": "getNetworks",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "equinixNetworksContainer": {
          "name": "equinixNetworksContainer",
          "label": "",
          "id": "equinix_networks_container",
          "type": "object",
          "format": "subformContainer",
          "properties": {
            "subform": {
              "$ref": "#/definitions/equnixNetworksSubform"
            }
          },
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotEquinix",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "KVMNetworks": {
          "name": "networks",
          "type": "object",
          "format": "multiRow",
          "label": "Networks",
          "hideHeader": true,
          "hasToggle": false,
          "numbered": true,
          "properties": {
            "subform": {
              "$ref": "#/definitions/KVMNetworkRow"
            }
          },
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotKVM",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "vnfs": {
          "type": "array",
          "label": "VNFS",
          "format": "dropdown",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotKVM",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "subnet": {
          "type": "string",
          "format": "dropdown",
          "label": "subnet",
          "helpText": "Optional. If you leave subnet blank, the machine will be created in the location's (availability zone) default subnet.",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideSecurityGroup",
              "dependsOn": "cloudContainer.cloud"
            },
            {
              "prop": "enum",
              "func": "getSubnets",
              "dependsOn": "setupMachine.location"
            }
          ]
        },
        "subnetwork": {
          "type": "string",
          "format": "dropdown",
          "label": "Subnetwork",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotGoogle",
              "dependsOn": "cloudContainer.cloud"
            },
            {
              "prop": "enum",
              "func": "getSubnets",
              "dependsOn": "setupMachine.location"
            }
          ]
        },
        "private_ip": {
          "type": "boolean",
          "label": "Private Ip",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotLinode",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "security_groups": {
          "type": "string",
          "format": "checkboxGroup",
          "label": "Security groups",
          "enum": ["Default security group", "HTTP(S)", "SSH"],
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotOpenstack",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "openStackNetworks": {
          "type": "string",
          "name": "networks",
          "format": "dropdown",
          "label": "networks",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotOpenstack",
              "dependsOn": "cloudContainer.cloud"
            },
            {
              "prop": "enum",
              "func": "getNetworks",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "associate_floating_ip": {
          "type": "boolean",
          "label": "Associate floating ip",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideIfNotOpenstack",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        }
      }
    },
    "equnixNetworksSubform": {
      "type": "object",
      "format": "subform",
      "properties": {
        "publicIPv4":{
          "type": "boolean",
          "label": "Public IPv4",
          "helpText": "Choose whether to assign Public IPv4 IPs."
        },
        "ipv4SubnetSize": {
          "type": "string",
          "format": "dropdown",
          "label": "IPv4 Subnet Size",
          "helpText": "Choose the public IPv4 subnet sizes that you would like to allocate when provisioning this device. By default, Equinix Metal assigns a /31 to each host; however, Windows requires a /30 and ESXi requires a /29.",
          "enum": ["/28", "/29", "/30", "/31"],
          "deps": [
            {
              "prop": "hidden",
              "func": "hideipv4SubnetSize",
              "dependsOn": ".publicIPv4"
            }
          ]
        },
        "publicIPv6":{
          "type": "boolean",
          "label": "Public IPv4",
          "helpText": "Choose whether to assign Public IPv6 IPs."
        },
        "ipv6SubnetSize": {
          "type": "string",
          "format": "dropdown",
          "label": "IPv6 Subnet Size",
          "helpText": "Choose the public IPv6 subnet size that you would like to allocate when provisioning this device. By default, Equinix Metal assigns a /31 to each host; however, Windows requires a /30 and ESXi requires a /29.",
          "x-mist-enum": "getipv6Subnets",
          "deps": [
            {
              "prop": "hidden",
              "func": "hideipv6SubnetSize",
              "dependsOn": ".publicIPv6"
            }
          ]
        },
        "privateIpv4SubnetSize": {
          "type": "string",
          "format": "dropdown",
          "label": "Private IPv4 Subnet Size",
          "helpText": "Choose the private IPv4 subnet size that you would like to allocate when provisioning this device.",
          "enum": ["/28", "/29", "/30", "/31"]
        }
      }
    },
    "KVMNetworkRow": {
      "type": "object",
      "format": "rowDefinition",
      "properties": {
        "network": {
          "type": "string",
          "format": "dropdown",
          "required": true,
          "deps": [
            {
              "prop": "enum",
              "func": "getKVMNetworks",
              "dependsOn": "cloudContainer.cloud"
            }
          ]
        },
        "ip": {
          "type": "string"
        },
        "gateway": {
          "type": "string"
        },
        "primary": {
          "type": "string"
        }
      }
    }
  }
}